## Context
当前水印编辑器采用左右分栏布局，左侧为固定工具栏，右侧为图片操作区域。提供三种水印模式（平铺/单个/批量），用户需要在模式间切换。

新设计简化为单一图片操作窗口，通过可交互的文本框控件实现更直观的水印编辑体验。

## Goals / Non-Goals
- Goals:
  - 简化 UI 架构，移除模式切换概念
  - 提供直观的文本框交互（拖拽、调整大小、旋转）
  - 保留平铺水印作为可选配置
  - 保留批量图片处理能力

- Non-Goals:
  - 不实现图片编辑功能（裁剪、滤镜等）
  - 不支持图片水印（仅文字水印）
  - 不实现撤销/重做功能

## Decisions

### 1. 文本框控件实现方案
- **Decision**: 自定义实现基于 Canvas 的可交互文本框
- **Alternatives considered**:
  - Fabric.js: 功能强大但体积较大（~300KB）
  - Konva.js: 类似 Fabric.js，学习成本高
  - 自定义实现: 轻量，完全可控
- **Rationale**: 项目需求相对简单，自定义实现可以保持轻量且完全可控

### 2. 工具栏显示策略
- **Decision**: 选中文本框时在图片顶部显示浮动工具栏
- **Rationale**: 减少 UI 占用空间，工具栏仅在需要时显示

### 3. 平铺水印与文本框共存
- **Decision**: 平铺水印作为独立配置项，可与文本框水印同时存在
- **Rationale**: 用户可能需要在图片上同时使用平铺水印（防盗用）和单个文本框（品牌标识）

## Risks / Trade-offs
- **自定义文本框实现复杂度** → 分阶段实现，先完成基础功能再迭代
- **旋转后调整大小的交互复杂** → 使用旋转手柄而非角落调整

## Migration Plan
这是破坏性变更，需要完全重写 UI 组件。建议：
1. 保留原有工具函数（`src/utils/watermark.ts`）
2. 重写组件层
3. 一次性替换，不做渐进式迁移

## Open Questions
- 是否需要支持文本框的字体选择？（当前仅支持大小）
- 平铺水印配置面板的显示位置？（建议作为独立按钮触发的弹出面板）

